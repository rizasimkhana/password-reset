# Password Reset Feature - README

## Overview

This README describes the implementation of a password reset feature that allows users to securely reset their passwords. It involves a simple email verification process where users can request a reset link, which is sent to their email. They can then use the link to reset their password. This process ensures the user's identity is verified before changing the password.

## Technology Stack:
- **Frontend**: React
- **Backend**: Node.js (Express)
- **Database**: MongoDB
- **Email Service**: Gmail SMTP or other email service providers like SendGrid
- **Hosting/Deployment**: Render.com (or similar hosting service) and netlify.com

## API Endpoints:

1. **Request Password Reset**
   - **Endpoint**: `POST https://password-reset-4t87.onrender.com/request-password-reset`
   - **Description**: The user provides their email address, and the system checks if the email exists in the database. If it exists, the system generates a unique reset token and sends an email with the reset link.
   - **Request Body**:
     ```json
     {
       "email": "riza.simkhanas@gmail.com"
     }
     ```
   - **Response**: A success message is sent to the user, or an error message if the user is not found.

2. **Reset Password**
   - **Endpoint**: `POST https://password-reset-4t87.onrender.com/reset-password/{randomString}`
   - **Description**: The user clicks the reset link sent to their email. The system verifies the reset token (contained in the URL), and if valid, presents the user with a form to enter a new password. The new password is then saved in the database.
   - **Request Body**:
     ```json
     {
       "newPassword": "newpassword123"
     }
     ```
   - **Response**: A success message if the password is successfully reset, or an error message if the token is invalid or expired.

---

## Flow of the Password Reset Process:

### 1. **Request Password Reset (Frontend)**
   - **User Action**: The user navigates to the "Forgot Password" page and submits their email address.
   - **Backend Check**: The system checks if the email exists in the database.
     - If the email exists:
       - A unique token (random string) is generated.
       - An email containing the password reset link (with the token) is sent to the user.
     - If the email doesn't exist:
       - An error message is returned to the user ("User not found").

### 2. **Send Reset Link (Backend)**
   - A unique random string (token) is generated by the backend.
   - The token is associated with the user in the database for future validation.
   - A reset link is generated using the token and sent to the user's email address.
     - Example link: `https://password-reset-4t87.onrender.com/reset-password/{randomString}`

### 3. **User Clicks on the Reset Link (Frontend)**
   - The user clicks the reset link in their email, which redirects them to the password reset page.
   - The link contains the token as a URL parameter (e.g., `?token={randomString}`).
   - The frontend extracts the token from the URL.

### 4. **Token Validation (Backend)**
   - The backend receives the token from the URL.
   - The system checks if the token exists in the database and whether it matches the one sent to the user's email.
     - If the token is valid:
       - The user is shown a password reset form.
       - The user can enter a new password.
     - If the token is invalid or expired:
       - An error message is displayed to the user ("Invalid or expired token").

### 5. **Reset Password (Frontend and Backend)**
   - **User Action**: The user enters their new password in the provided form.
   - **Backend Action**: The backend verifies the new password and updates the user's password in the database.
     - The random string (token) is deleted from the database to ensure it cannot be reused.
   - **Response**: A success message is displayed to the user ("Password reset successful").
   
---

## Database Design:

1. **Users Collection**:
   - Stores user information, including the email address and password.
   - Example Fields:
     - `email` (string, unique)
     - `password` (hashed string)

2. **Password Reset Tokens Collection**:
   - Stores the random tokens generated for password resets.
   - Example Fields:
     - `userId` (reference to the user document)
     - `token` (string, unique)
     - `createdAt` (timestamp)

---

## Security Considerations:

1. **Token Expiry**: 
   - The reset token should expire after a set period (e.g., 1 hour) to ensure it cannot be used indefinitely.
   - After expiry, the user will need to request a new reset link.
   
2. **Password Hashing**:
   - Passwords should never be stored in plain text. Use a secure hashing algorithm (e.g., bcrypt, argon2) to hash the passwords before storing them in the database.

3. **Secure Transmission**:
   - Ensure all communications, especially sensitive information like passwords and tokens, are transmitted over HTTPS to prevent man-in-the-middle attacks.

4. **Token Security**:
   - The token should be long and random to prevent brute-force attacks. Consider using a cryptographically secure method to generate the token.

5. **Rate Limiting**:
   - Implement rate limiting to prevent brute-force attacks on the password reset request endpoint. For example, only allow a certain number of password reset requests per IP or email within a specific time window.

---

## Conclusion:

The password reset feature outlined here provides a secure and user-friendly way for users to recover access to their accounts. By using token-based authentication and email verification, the system ensures that only the rightful user can reset the password. Implementing the appropriate security measures such as token expiration and password hashing helps safeguard the user's data.